# opengl-learn
learn opengl



## 1 画点



## 2 画线 多边形 三角形



## 3 keyboard 键盘交互

`glutKeyboardFunc`

通过wsad按键调整矩形位置



## 4  鼠标交互

鼠标左键点击哪个位置，矩形就变化到哪个位置



## 5  DDA数值微分线段算法

之前画线本质上是**一个一个像素点连接起来**，所以没有笔直的线段，放大看会有粗糙的现象,像素点有偏差

DDA 数值微分法

+ Δx为 终点x - 起点x		  Δy为 终点y - 起点y
+ 当Δx > Δy, 把x作为主方向: `steps = |Δx| > |Δy|? Δx: Δy`
+ 当Δx < Δy, 把y作为主方向: `steps = |Δx| > |Δy|? Δx: Δy`
+ `stepX = Δx / steps`                     `stepY = Δy / steps`
+ 按照step一个一个点画出来, x一次增加stepX, y一次增加stepY



## 6 Bresenham 直线算法

假设x方向占优，x每次步进为1

+ 第一个点 (Xk, Yk)

+ 第二个点(X(k+1), du或者dl ),   y的位置和像素点有所偏差(小数), 记录y上面一点的像素点位置和当前点距离为du, 下面为dl
  + 设直线 `y = mX(k+1) + b`
  + **当 du > dl, 选择下面这个点**
  + **当 du < dl, 选择上面这个点**
  + 设当前点为y，上面一点为y(k+1), 下面一点为y(k)
  + dl = y - yk = mX(k+1) + b - y(k)
  + du = y(k+1) - y = y(k+1) - mX(k+1) - b
  + dl - du = mx(k+1) + b - y(k) - y(k+1) + mX(k+1) +b
    + = 2mx(k+1) - y(k) - y(k+1) + 2b
    + = 2m*x(k+1) - 2y(k) + 2b - 1
  + 令 P(k) = Δx(dl - du)
    + = `Δx*2mx(k+1) - 2Δx*y(k) + Δx*(2b - 1)`
    + 因为m为斜率，所以 `Δx*(Δy/Δx)2x(k+1) - 2Δx*y(k) + Δx*(2b - 1)`
    + = `2Δyx(k+1) - 2Δx*y(k) + Δx*(2b - 1)` 
    + 因为x(k+1) = x(k) + 1, 所以: `2Δyx(k) - 2Δx*y(k) + 2Δy + Δx*(2b - 1)` 
    + 省略常数项， 写成: `2Δyx(k) - 2Δx*y(k) + C`
  + 当P(k) > 0时， dl > du, 选上面点
  + 当P(k) < 0时， dl < du, 选下面点
  + P(k+1) = 2Δyx(k+1) - 2Δx*y(k+1) + C
  + P(k+1) - P(k) = 2Δy(x(k+1) - x(k)) - 2Δx(y(k+1) - y(k))
    + 因为前提条件x方向占优, 所以： 2Δy * 1 - 2Δx(y(k+1) - y(k))
  + P(k+1) = 2Δy * 1 - 2Δx(y(k+1) - y(k)) + P(k),  是一个**递推的公式**，可以根据上一次的结果推下一次结果
  + 计算p1的方法:
    + **如果p0 > 0** ,由于选上面那个点，所以y(k+1) - y(k) = 1，得出： **p1 = p0 + 2Δy - 2Δx**
    + **如果p0 < 0** ,由于选下面那个点，所以y(k+1) - y(k) = 0，得出： **p1 = p0 + 2Δy** 



​	算法步骤:

1. 输入 (x1, y1)  (xn, yn)
2. dx = xn - x1            dy = yn - y1
3. 2dx                2dy
4. p0 = 2dy - dx
5. 循环
   1. 如果P(k) > 0 ,选上面点(x(k+1), y(k+1))  **p(k+1) = p(k) + 2dy - 2dx**
   2. 如果P(k) < 0, 选下面点(x(k+1), yk)         **p(k+1) = p(k) + 2dy**



## 7 中点画线法

